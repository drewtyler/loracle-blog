{{- define "main" }}

{{- $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}
{{- $featured := first 1 $pages }}
{{- $rest := after 1 $pages }}

<div class="home-layout">
    <main class="home-main">
        {{/* Featured / Latest Post */}}
        {{- range $featured }}
        <article class="featured-post">
            <span class="featured-label">Latest Post</span>
            <h1 class="featured-title">
                <a href="{{ .Permalink }}">{{- .Title }}</a>
            </h1>
            <div class="featured-meta">
                {{- partial "post_meta.html" . -}}
            </div>
            <div class="featured-content">
                {{ .Summary }}
            </div>
            <a href="{{ .Permalink }}" class="read-more">Read full post â†’</a>
        </article>
        {{- end }}

        {{/* Other posts */}}
        <div class="other-posts">
            <h2 class="section-title">Previous Posts</h2>
            {{- range $rest }}
            <article class="post-card">
                <h3><a href="{{ .Permalink }}">{{- .Title }}</a></h3>
                <p>{{ .Summary | truncate 120 }}</p>
                <span class="post-date">{{ .Date.Format "January 2, 2006" }}</span>
            </article>
            {{- end }}
        </div>
    </main>

    <aside class="home-sidebar">
        <div class="sidebar-about">
            <h2>{{ .Site.Params.homeInfoParams.Title }}</h2>
            <p>{{ .Site.Params.homeInfoParams.Content | markdownify }}</p>
        </div>
    </aside>
</div>

{{- end }}{{- /* end main */ -}}
